{% extends 'base.html' %}

{% block title %}Мой профиль - Добрые дела Росатома{% endblock %}

{% block content %}
<div class="card">
    <h2>Мой профиль</h2>
    
    <div style="display: flex; gap: 2rem; margin-top: 2rem;">
        <div style="flex: 1;">
            <div class="avatar" style="width: 100px; height: 100px; font-size: 2rem;">
                {{ user.first_name|first }}{{ user.last_name|first }}
            </div>
        </div>
        
        <div style="flex: 2;">
            <div class="form-group">
                <label>Имя пользователя:</label>
                <p><strong>{{ user.username }}</strong></p>
            </div>
            
            <div class="form-group">
                <label>Полное имя:</label>
                <p><strong>{{ user.full_name }}</strong></p>
            </div>
            
            <div class="form-group">
                <label>Email:</label>
                <p><strong>{{ user.email }}</strong>
                {% if user.email_verified %}
                    <span style="color: green;">✓ Подтвержден</span>
                {% else %}
                    <span style="color: red;">✗ Не подтвержден</span>
                    <a href="{% url 'accounts:email_verification' %}">Подтвердить</a>
                {% endif %}
                </p>
            </div>
            
            <div class="form-group">
                <label>Роль:</label>
                <p><strong>{{ user.get_role_display }}</strong></p>
            </div>
            
            <div class="form-group">
                <label>Город:</label>
                <p><strong>{{ user.city|default:"Не указан" }}</strong></p>
            </div>
            
            <div class="form-group">
                <label>Статистика волонтера:</label>
                <p>Часов волонтерства: <strong>{{ user.total_volunteer_hours }}</strong></p>
                <p>Участий в мероприятиях: <strong>{{ user.events_participated }}</strong></p>
            </div>
            
            <div style="margin-top: 2rem;">
                <a href="{% url 'accounts:profile_edit' %}" class="btn btn-primary">Редактировать профиль</a>
                <a href="{% url 'accounts:password_change' %}" class="btn btn-primary">Сменить пароль</a>
                <a href="{% url 'accounts:activity_log' %}" class="btn btn-primary">История активности</a>
            </div>
        </div>
    </div>
</div>

{% if user.is_nko_representative %}
<div class="card">
    <h3>Мои организации</h3>
    <p>Вы представитель НКО. Вы можете управлять своими организациями.</p>
    <a href="{% url 'organizations:my_organizations' %}" class="btn btn-success">Управление организациями</a>
</div>
{% endif %}
{% endblock %}